name: Build Release 

on:
  release:
    types: [published]
  push:
    tags:
      - "*"       

jobs:
    build:
        name: Build Arcticons APK
        if: startsWith(github.ref, 'refs/tags/')
        runs-on: ubuntu-latest
        steps:
            - name: Checking out branch
              uses: actions/checkout@v4

            - name: Get Release Notes
              id: image
              run: |
                name=$(cat ./generated/releaseName.txt)
                name=$(echo $name | tr '\n' ' ')
                image="![releaseImage](https://github.com/Arcticons-Team/Arcticons/blob/$GITHUB_REF_NAME/generated/releaseImage.jpg)"
                changelog=$(cat ./generated/changelog.md)
                changelog="$changelog  $image"
                echo $GITHUB_REF_NAME
                echo $name
                echo $changelog
                gh release create $GITHUB_REF_NAME --generate-notes --title "$name" --notes "$changelog" --discussion-category "Announcements"

              env:
                GH_TOKEN: ${{ github.token }}
            

                  